(()=>{var e={};e.id=843,e.ids=[843],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5846:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(1609),r(5582),r(5866);var s=r(3191),a=r(8716),l=r(7922),i=r.n(l),o=r(5231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(t,n);let d=["",{children:["photos",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1609)),"C:\\xampp\\htdocs\\snap\\src\\app\\photos\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5582)),"C:\\xampp\\htdocs\\snap\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\xampp\\htdocs\\snap\\src\\app\\photos\\[id]\\page.tsx"],m="/photos/[id]/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/photos/[id]/page",pathname:"/photos/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7824:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},4940:(e,t,r)=>{Promise.resolve().then(r.bind(r,8015))},6770:(e,t,r)=>{Promise.resolve().then(r.bind(r,1382))},1382:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(326),a=r(7577),l=r(5047),i=r(6226),o=r(434);function n({params:e}){let[t,r]=(0,a.useState)(null),[n,d]=(0,a.useState)(!0),[c,m]=(0,a.useState)(""),[p,h]=(0,a.useState)(""),[x,u]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),y=(0,l.useRouter)(),j=async()=>{try{let t=await fetch(`/api/photos/${e.id}`),s=await t.json();if(!t.ok)throw Error(s.error||"Failed to fetch photo");r(s.data)}catch(e){m(e.message)}finally{d(!1)}},N=async()=>{if(!f){y.push("/login");return}if(!b){v(!0);try{let t=localStorage.getItem("token"),s=await fetch(`/api/photos/${e.id}/vote`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed to vote");r(e=>e?{...e,votes:e.votes+1}:null)}catch(e){m(e.message)}finally{v(!1)}}},w=async t=>{if(t.preventDefault(),!f){y.push("/login");return}if(p.trim()&&!x){u(!0);try{let t=localStorage.getItem("token"),r=await fetch(`/api/photos/${e.id}/comments`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({content:p})}),s=await r.json();if(!r.ok)throw Error(s.error||"Failed to add comment");h(""),j()}catch(e){m(e.message)}finally{u(!1)}}};return n?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):c?s.jsx("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded-md",children:c}):t?(0,s.jsxs)("div",{className:"py-8",children:[s.jsx(o.default,{href:"/photos",className:"text-primary hover:underline mb-4 inline-block",children:"← Back to photos"}),(0,s.jsxs)("div",{className:"card mt-4",children:[s.jsx("div",{className:"relative w-full aspect-video mb-4",children:s.jsx(i.default,{src:t.image_url,alt:t.title,className:"rounded-lg object-contain",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 80vw, 70vw",priority:!0})}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h1",{className:"text-2xl font-bold",children:t.title}),(0,s.jsxs)("button",{onClick:N,disabled:b,className:"flex items-center gap-1 px-3 py-1 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:t.votes})]})]}),t.description&&s.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-8",children:[(0,s.jsxs)("span",{children:["By ",t.author]}),s.jsx("span",{className:"mx-2",children:"•"}),s.jsx("span",{children:new Date(t.created_at).toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Comments"}),s.jsx("form",{onSubmit:w,className:"mb-6",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:p,onChange:e=>h(e.target.value),placeholder:f?"Add a comment...":"Log in to comment",disabled:!f||x,className:"form-input flex-grow"}),s.jsx("button",{type:"submit",disabled:!f||!p.trim()||x,className:"btn-primary px-4 disabled:opacity-50",children:"Post"})]})}),t.comments&&t.comments.length>0?s.jsx("div",{className:"space-y-4",children:t.comments.map(e=>(0,s.jsxs)("div",{className:"border-b pb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-medium",children:e.username}),s.jsx("span",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),s.jsx("p",{className:"mt-1",children:e.content})]},e.id))}):s.jsx("p",{className:"text-gray-500 italic",children:"No comments yet. Be the first to comment!"})]})]})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-xl text-gray-500",children:"Photo not found"}),s.jsx(o.default,{href:"/photos",className:"mt-4 inline-block text-primary hover:underline",children:"Back to photos"})]})}},8015:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(326),a=r(434),l=r(7577),i=r(5047);function o(){let[e,t]=(0,l.useState)(!1),[r,o]=(0,l.useState)(""),[n,d]=(0,l.useState)(!1),c=(0,i.useRouter)(),m=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t(!1),o(""),c.push("/")};return(0,s.jsxs)("nav",{className:"bg-white shadow-md",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0 flex items-center",children:s.jsx(a.default,{href:"/",className:"text-primary text-xl font-bold",children:"Snap"})}),(0,s.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[s.jsx(a.default,{href:"/",className:"border-transparent text-gray-500 hover:border-primary hover:text-primary inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Home"}),s.jsx(a.default,{href:"/photos",className:"border-transparent text-gray-500 hover:border-primary hover:text-primary inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Photos"})]})]}),s.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:e?(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx(a.default,{href:"/upload",className:"btn-primary text-sm",children:"Upload Photo"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>d(!n),className:"flex items-center text-sm font-medium text-gray-700 focus:outline-none",children:[(0,s.jsxs)("span",{children:["Hi, ",r]}),s.jsx("svg",{className:"ml-1 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),n&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 z-10",children:[s.jsx(a.default,{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Your Profile"}),s.jsx("button",{onClick:m,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign out"})]})]})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx(a.default,{href:"/login",className:"border border-primary text-primary hover:bg-primary hover:text-white px-4 py-2 rounded-md text-sm",children:"Log in"}),s.jsx(a.default,{href:"/register",className:"btn-primary text-sm",children:"Sign up"})]})}),s.jsx("div",{className:"flex items-center sm:hidden",children:s.jsx("button",{onClick:()=>d(!n),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none",children:s.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),n&&(0,s.jsxs)("div",{className:"sm:hidden",children:[(0,s.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[s.jsx(a.default,{href:"/",className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-gray-500 hover:bg-gray-50 hover:border-primary hover:text-primary",children:"Home"}),s.jsx(a.default,{href:"/photos",className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-gray-500 hover:bg-gray-50 hover:border-primary hover:text-primary",children:"Photos"})]}),s.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200",children:e?(0,s.jsxs)("div",{children:[s.jsx("div",{className:"px-4 py-2",children:(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["Hi, ",r]})}),(0,s.jsxs)("div",{className:"mt-3 space-y-1",children:[s.jsx(a.default,{href:"/profile",className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-gray-500 hover:bg-gray-50 hover:border-primary hover:text-primary",children:"Your Profile"}),s.jsx(a.default,{href:"/upload",className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-gray-500 hover:bg-gray-50 hover:border-primary hover:text-primary",children:"Upload Photo"}),s.jsx("button",{onClick:m,className:"block w-full text-left pl-3 pr-4 py-2 border-l-4 border-transparent text-gray-500 hover:bg-gray-50 hover:border-primary hover:text-primary",children:"Sign out"})]})]}):(0,s.jsxs)("div",{className:"px-4 py-2 space-y-2",children:[s.jsx(a.default,{href:"/login",className:"block text-center border border-primary text-primary hover:bg-primary hover:text-white px-4 py-2 rounded-md",children:"Log in"}),s.jsx(a.default,{href:"/register",className:"block text-center btn-primary",children:"Sign up"})]})})]})]})}},5582:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>o});var s=r(9510),a=r(5384),l=r.n(a);r(4315);let i=(0,r(8570).createProxy)(String.raw`C:\xampp\htdocs\snap\src\components\Navbar.tsx#default`);r(1159);let o={title:"Snap - Photo Sharing App",description:"Share your moments with Snap"};function n({children:e}){return s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{className:l().className,children:[s.jsx(i,{}),s.jsx("main",{className:"min-h-screen p-4 max-w-7xl mx-auto",children:e}),s.jsx("footer",{className:"bg-white shadow-inner mt-8 py-6",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("p",{className:"text-center text-sm text-gray-500",children:["\xa9 ",new Date().getFullYear()," Snap. All rights reserved."]})})})]})})}},1609:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\xampp\htdocs\snap\src\app\photos\[id]\page.tsx#default`)},4315:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,431,226],()=>r(5846));module.exports=s})();